# Архитектура системы и шаблоны

## Архитектура
Система построена по модульному принципу с четким разделением ответственности:

1. **Модуль сбора доменов** (`collect_domains.py`) - отвечает за извлечение доменов с Яндекса
2. **Модуль работы с ключевыми словами** (`collect_keywords.py`) - отвечает за получение и обработку ключевых слов через API Bukvarix
3. **Модуль сбора ссылок** (`get_link.py`) - отвечает за поиск и извлечение ссылок по запросам
4. **Модуль обработки результатов** (`create_result.py`) - отвечает за агрегирование и сохранение результатов
5. **Вспомогательные модули**:
   - Управление путями (`paths.py`)
   - Логирование (`logger.py`)
   - Работа с CAPTCHA (`capsola.py`)
6. **Основной модуль** (`main.py`) - координирует работу всех компонентов системы

## Ключевые технические решения
- **Многопоточность**: Использование встроенного модуля threading для параллельной обработки запросов
- **Автоматизация браузера**: Применение Selenium WebDriver для взаимодействия с веб-страницами
- **Обработка CAPTCHA**: Интеграция с сервисом для автоматического решения различных типов CAPTCHA
- **Система логирования**: Централизованное логирование с разделением по компонентам и ротацией файлов
- **Инкапсуляция WebDriver**: Использование паттерна Singleton для управления экземплярами WebDriver
- **Обработка ошибок**: Структурированная система обработки исключений с подробным логированием

## Шаблоны проектирования
- **Фасад**: Класс Application предоставляет упрощенный интерфейс для работы со всей системой
- **Singleton**: PathManager используется как глобальный экземпляр для доступа к путям файлов
- **Стратегия**: Различные стратегии решения CAPTCHA в зависимости от её типа
- **Адаптер**: Преобразование данных API в форматы, используемые в системе
- **Фабричный метод**: Создание экземпляров логгеров с разными настройками через функцию get_logger

## Взаимодействие компонентов
```
Запуск Main Application
    │
    ├─> Сбор доменов (DomainExtractor)
    │       │
    │       └─> Сохранение в domains.txt
    │
    ├─> Сбор ключевых слов (KeywordCollector)
    │       │
    │       └─> API Bukvarix → Обработка → keywords.txt
    │
    ├─> Сбор ссылок по запросам (LinkCollector)
    │       │
    │       ├─> Обработка CAPTCHA при необходимости
    │       └─> Сохранение в parsed_links.txt
    │
    └─> Создание финального результата (create_result.py)
            │
            └─> Сохранение в result.txt
```

## Структура данных
- **domains.txt**: Список уникальных доменов, по одному на строку
- **keywords.txt**: Формат `<домен> <запрос>`, упорядоченные по популярности
- **parsed_links.txt**: Список URL-адресов, собранных по запросам
- **result.txt**: Итоговый обработанный файл с результатами

Основная структура директорий:
- `project_folder/`: Временные файлы для обработки данных
- `results_folder/`: Промежуточные результаты работы модулей
- `logs/`: Лог-файлы для каждого компонента системы 